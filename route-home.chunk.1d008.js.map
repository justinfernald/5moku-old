{"version":3,"sources":["webpack:///./components/clipboard-copy.tsx","webpack:///./routes/home/style.css","webpack:///./components/game/local.tsx","webpack:///./routes/home/index.tsx"],"names":["ClipboardCopy","text","navigator","clipboard","writeText","document","execCommand","copyText","useState","isCopied","setIsCopied","type","value","readOnly","onClick","copyTextToClipboard","then","setTimeout","catch","err","console","error","Modal","setAppElement","LocalGame","boardSize","forceUpdate","useUpdater","game","useRef","Gomoku","width","height","current","isGameOver","addUpdateHandler","class","style","root","onCellClick","location","placeCell","row","col","content","top","left","right","bottom","marginRight","transform","onRequestClose","isOpen","winner","resetButton","reset","Home","PlayMode","UNSET","mode","setMode","setBoardSize","connection","setConnection","id","setId","peer","setPeer","useEffect","REMOTE","newId","uuid","newPeer","Peer","on","conn","log","border","boxShadow","overlay","background","for","name","onChange","e","target","selected","LOCAL","window","origin","host"],"mappings":"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","file":"route-home.chunk.1d008.js","sourcesContent":["import { h } from \"preact\";\r\nimport { useState } from \"preact/hooks\";\r\n\r\nexport function ClipboardCopy({ copyText }: { copyText: string }) {\r\n    const [isCopied, setIsCopied] = useState(false);\r\n\r\n    async function copyTextToClipboard(text: string) {\r\n        if (\"clipboard\" in navigator) {\r\n            return await navigator.clipboard.writeText(text);\r\n        } else {\r\n            return document.execCommand(\"copy\", true, text);\r\n        }\r\n    }\r\n\r\n    const handleCopyClick = () => {\r\n        copyTextToClipboard(copyText)\r\n            .then(() => {\r\n                setIsCopied(true);\r\n                setTimeout(() => {\r\n                    setIsCopied(false);\r\n                }, 1500);\r\n            })\r\n            .catch((err) => {\r\n                console.error(err);\r\n            });\r\n    };\r\n    return (\r\n        <div>\r\n            <input type=\"text\" value={copyText} readOnly />\r\n            <button onClick={handleCopyClick}>\r\n                <span>{isCopied ? \"Copied!\" : \"Copy\"}</span>\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"page\":\"page__U-UI-\",\"buttonWrapper\":\"buttonWrapper__SQENv\",\"button\":\"button__5kNlZ\"};","import { h } from \"preact\";\r\nimport { useRef } from \"preact/hooks\";\r\n\r\nimport { Gomoku } from \"src/models/game\";\r\nimport Grid from \"./grid\";\r\nimport style from \"./style.css\";\r\nimport Modal from \"react-modal\";\r\nimport { useUpdater } from \"src/utils/hooks/useUpdate\";\r\n\r\nModal.setAppElement(\"#app\");\r\n\r\nconst LocalGame = ({ boardSize = 15 }: { boardSize: number }) => {\r\n    const forceUpdate = useUpdater();\r\n\r\n    const gameRef = useRef(new Gomoku({ width: boardSize, height: boardSize }));\r\n    const game = gameRef.current;\r\n\r\n    let isGameOver = game.isGameOver;\r\n\r\n    game.addUpdateHandler(forceUpdate);\r\n    return (\r\n        <div class={style.root}>\r\n            <Grid\r\n                game={game}\r\n                onCellClick={(location) =>\r\n                    game.placeCell(location.row, location.col)\r\n                }\r\n            />\r\n            <Modal\r\n                style={{\r\n                    content: {\r\n                        top: \"50%\",\r\n                        left: \"50%\",\r\n                        right: \"auto\",\r\n                        bottom: \"auto\",\r\n                        marginRight: \"-50%\",\r\n                        transform: \"translate(-50%, -50%)\",\r\n                    },\r\n                }}\r\n                onRequestClose={() => (isGameOver = false)}\r\n                isOpen={isGameOver}>\r\n                {game.winner ? (\r\n                    <div>Way to go {game.winner} player! You won!</div>\r\n                ) : (\r\n                    <div>You are both losers! It was a draw.</div>\r\n                )}\r\n                <div class={style.resetButton} onClick={game.reset}>\r\n                    Play again\r\n                </div>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LocalGame;\r\n","import { h } from \"preact\";\nimport { useEffect, useState } from \"preact/hooks\";\nimport style from \"./style.css\";\nimport Modal from \"react-modal\";\n\nimport { v4 as uuid } from \"uuid\";\nimport Peer, { DataConnection } from \"peerjs\";\nimport { ClipboardCopy } from \"src/components/clipboard-copy\";\nimport { PlayMode } from \"src/models/game\";\nimport RemoteGame from \"src/components/game/remote\";\nimport LocalGame from \"src/components/game/local\";\n\nModal.setAppElement(\"#app\");\n\nconst Home = () => {\n    const [mode, setMode] = useState(PlayMode.UNSET);\n    const [boardSize, setBoardSize] = useState(15);\n    const [connection, setConnection] = useState<DataConnection | null>(null);\n    const [id, setId] = useState<string | null>(null);\n    const [peer, setPeer] = useState<Peer | null>(null);\n\n    useEffect(() => {\n        if (mode !== PlayMode.REMOTE) return;\n        const newId = uuid();\n        setId(newId);\n        const newPeer = new Peer(newId);\n\n        newPeer.on(\"connection\", (conn) => {\n            console.log(\"connected\");\n\n            setConnection(conn);\n        });\n\n        setPeer(newPeer);\n    }, [mode]);\n\n    return (\n        <div class={style.page}>\n            <Modal\n                style={{\n                    content: {\n                        top: \"50%\",\n                        left: \"50%\",\n                        right: \"auto\",\n                        bottom: \"auto\",\n                        marginRight: \"-50%\",\n                        transform: \"translate(-50%, -50%)\",\n                        border: \"none\",\n                        boxShadow:\n                            \"0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)\",\n                    },\n                    overlay: {\n                        background: \"unset\",\n                    },\n                }}\n                isOpen={mode === PlayMode.UNSET}>\n                <div>How would you like to play?</div>\n                <br />\n                <div>\n                    <label for=\"board-size\">{\"Board Size: \"}</label>\n                    <select\n                        name=\"board-size\"\n                        onChange={(e) =>\n                            setBoardSize(+(e.target as HTMLOptionElement).value)\n                        }>\n                        <option value={10}>10x10</option>\n                        <option value={15} selected>\n                            15x15\n                        </option>\n                        <option value={19}>19x19</option>\n                    </select>\n                </div>\n                <div class={style.buttonWrapper}>\n                    <div\n                        class={style.button}\n                        onClick={() => setMode(PlayMode.LOCAL)}>\n                        Local\n                    </div>\n                    <div\n                        class={style.button}\n                        onClick={() => setMode(PlayMode.REMOTE)}>\n                        Online\n                    </div>\n                </div>\n            </Modal>\n            <Modal\n                style={{\n                    content: {\n                        top: \"50%\",\n                        left: \"50%\",\n                        right: \"auto\",\n                        bottom: \"auto\",\n                        marginRight: \"-50%\",\n                        transform: \"translate(-50%, -50%)\",\n                        border: \"none\",\n                        boxShadow:\n                            \"0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)\",\n                    },\n                    overlay: {\n                        background: \"unset\",\n                    },\n                }}\n                isOpen={mode === PlayMode.REMOTE && !connection}>\n                <div>\n                    Send this link to your friend...\n                    <br />\n                    or enemy.\n                </div>\n                <br />\n                <ClipboardCopy\n                    copyText={`${window.location.origin}/${id}`}\n                />{\" \"}\n            </Modal>\n            {mode !== PlayMode.UNSET && mode === PlayMode.LOCAL ? (\n                <LocalGame boardSize={boardSize} />\n            ) : (\n                peer &&\n                connection && (\n                    <RemoteGame\n                        host={true}\n                        boardSize={boardSize}\n                        connection={connection}\n                    />\n                )\n            )}\n        </div>\n    );\n};\n\nexport default Home;\n"],"sourceRoot":""}