{"version":3,"sources":["webpack:///./routes/remote-join/style.css","webpack:///./routes/remote-join/index.tsx"],"names":["RemoteJoin","id","opponentId","connection","setConnection","useState","useEffect","newId","uuid","newPeer","Peer","on","console","log","newConnection","connect","class","style","host"],"mappings":"0IACe,EAAQ,c,wBCoCRA,UA7BI,EAAGC,GAAIC,MACtB,MAAOC,EAAYC,GAAiBC,YAAgC,MAiBpE,OAfAC,aAAU,KACN,MAAMC,EAAQC,cACRC,EAAU,IAAIC,IAAKH,GACzBE,EAAQE,GAAG,QAAQ,KACfC,QAAQC,IAAI,cACZ,MAAMC,EAAgBL,EAAQM,QAAQb,GACtCY,EAAcH,GAAG,QAAQ,KACrBC,QAAQC,IAAI,aACZT,EAAcU,EAAd,IAGJA,EAAcH,GAAG,OAAQC,QAAQC,IAAjC,GARJ,GAUD,IAGC,mBAAKG,MAAOC,GACPd,EACG,YAAC,IAAD,CAAYe,MAAM,EAAOf,WAAYA,IAErC,wCALZ,C","file":"route-remote-join.chunk.0587d.esm.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"page\":\"page__CrAPo\",\"buttonWrapper\":\"buttonWrapper__6T1TX\",\"button\":\"button__IHpiY\"};","import { h } from \"preact\";\nimport { useEffect, useState } from \"preact/hooks\";\nimport RemoteGame from \"src/components/game/remote\";\nimport style from \"./style.css\";\n\nimport { v4 as uuid } from \"uuid\";\nimport Peer, { DataConnection } from \"peerjs\";\n\nconst RemoteJoin = ({ id: opponentId }: { id: string }) => {\n    const [connection, setConnection] = useState<DataConnection | null>(null);\n\n    useEffect(() => {\n        const newId = uuid();\n        const newPeer = new Peer(newId);\n        newPeer.on(\"open\", () => {\n            console.log(\"connecting\");\n            const newConnection = newPeer.connect(opponentId);\n            newConnection.on(\"open\", () => {\n                console.log(\"connected\");\n                setConnection(newConnection);\n            });\n\n            newConnection.on(\"data\", console.log);\n        });\n    }, []);\n\n    return (\n        <div class={style.page}>\n            {connection ? (\n                <RemoteGame host={false} connection={connection} />\n            ) : (\n                <div>Connecting...</div>\n            )}\n        </div>\n    );\n};\n\nexport default RemoteJoin;\n"],"sourceRoot":""}