{"version":3,"sources":["webpack:///./routes/remote-join/style.css","webpack:///./routes/remote-join/index.tsx"],"names":["RemoteJoin","id","opponentId","connectionHandler","setConnectionHandler","useState","useEffect","newId","uuid","newPeer","Peer","on","newConnection","connect","newConnectionHandler","ConnectionHandler","class","style","host"],"mappings":"0IACe,EAAQ,c,oCCsCRA,UA9BI,EAAGC,GAAIC,MACtB,MAAOC,EAAmBC,GACtBC,YAAmC,MAcvC,OAZAC,aAAU,KACN,MAAMC,EAAQC,cACRC,EAAU,IAAIC,IAAKH,GACzBE,EAAQE,GAAG,QAAQ,KACf,MAAMC,EAAgBH,EAAQI,QAAQX,GAChCY,EAAuB,IAAIC,IAAkBH,GACnDA,EAAcD,GAAG,QAAQ,IACrBP,EAAqBU,IADzB,GAHJ,GAOD,IAGC,mBAAKE,MAAOC,GACPd,EACG,YAAC,IAAD,CACIe,MAAM,EACNf,kBAAmBA,IAGvB,wCARZ,C","file":"route-remote-join.chunk.b8a52.esm.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"page\":\"page__CrAPo\",\"buttonWrapper\":\"buttonWrapper__6T1TX\",\"button\":\"button__IHpiY\"};","import { h } from \"preact\";\r\nimport { useEffect, useState } from \"preact/hooks\";\r\nimport RemoteGame from \"src/components/game/remote\";\r\nimport style from \"./style.css\";\r\n\r\nimport { v4 as uuid } from \"uuid\";\r\nimport Peer, { DataConnection } from \"peerjs\";\r\nimport { ConnectionHandler } from \"src/utils/connection-handler\";\r\n\r\nconst RemoteJoin = ({ id: opponentId }: { id: string }) => {\r\n    const [connectionHandler, setConnectionHandler] =\r\n        useState<ConnectionHandler | null>(null);\r\n\r\n    useEffect(() => {\r\n        const newId = uuid();\r\n        const newPeer = new Peer(newId);\r\n        newPeer.on(\"open\", () => {\r\n            const newConnection = newPeer.connect(opponentId);\r\n            const newConnectionHandler = new ConnectionHandler(newConnection);\r\n            newConnection.on(\"open\", () =>\r\n                setConnectionHandler(newConnectionHandler)\r\n            );\r\n        });\r\n    }, []);\r\n\r\n    return (\r\n        <div class={style.page}>\r\n            {connectionHandler ? (\r\n                <RemoteGame\r\n                    host={false}\r\n                    connectionHandler={connectionHandler}\r\n                />\r\n            ) : (\r\n                <div>Connecting...</div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RemoteJoin;\r\n"],"sourceRoot":""}